<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Terminal Mystery</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta name="author" content="Gavin Wainwright">
    <meta name="description" content="description here">
    <meta name="keywords" content="keywords,here">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="typed.js"></script>
</head>

<body>

    <div id="screen">Welcome to Terminal Mystery.
        <br>A command line mystery game created by <a href="https://github.com/gavwin">Gavin Wainwright</a>.
        <br>Original idea from <a href="https://itunes.apple.com/us/app/hackers-quest/id995672666?mt=8">Hacker's Quest.</a>
        <br>Type 'help' for a list of commands.
        <div id="output"></div>
        <br>gavin@localhost:~$
        <input></input>
    </div>
<!--<div class="element"></div>
    <script>
  $(function(){
      $(".element").typed({
        strings: ["First sentence.", "Second sentence."],
        typeSpeed: 0
      });
  });
</script>-->
    
    <script>
          var cmds = [
            "",
            "help",
            "clear",
            "inbox",
            "show",
            "show need your help",
            "connect",
            "connect root m4sk",
            ];
        
        var m4skChance = [
            "https://gavwin.github.io/Terminal%20Mystery/m4sk.html",
            "https://gavwin.github.io/Terminal%20Mystery/connection-failed.html",
            ];
       
             var $out = $("#output");
        $("#screen input").focus();
        $("#screen input").on('keydown', function(event) {
            if (event.which === 13) { // Enter key pressed
                var $this = $(this),
                    val = $this.val();
                $this.focus().val('');
                if (val === "") {
                    $out.append("gavin@localhost:~$<br>");
                } else
                     if (val === "help") {
                    $out.append("gavin@localhost:~$ help<br>");
                    $out.append("Here's a list of commands:<br>help - Sends a list of commands<br>concept - Explains how to play this game<br>clear - Clears the terminal<br>inbox - Shows your inbox<br>show - Shows the contents of a file or message<br>");
                } else
                if (val === "clear") {
                    $out.empty();
                } else
                                       if(val.startsWith("show")) {
                    if (val === "show need your help") {
                    $out.append("gavin@localhost:~$ show need your help<br>");
                   $out.append("Viewing the content of need your help:<br>Dear Gavin,<br>    For the past month or so I've been keeping an eye on a group of cyber<br>terrorists who call themselves, M.A.S.K.  (Mobile Armored Strike Kommand).<br>Your hacking skills are needed to take down this skulking espionage,<br>so get as much information on the group as you can.<br>Best of Luck,<br>Mike<br>P.S. You can gain access to one of their computers by <br>connecting with the host: root<br>and the password: m4sk<br>");
                    } else if(val === "show") {
                        $out.append("gavin@localhost:~$ show<br>");
                        $out.append("Specify a file / message to show.<br>");
                    }      
                } else
                if (val === "inbox") {
                    $out.append("gavin@localhost:~$ inbox<br>");
                    $out.append("Your Inbox:<br>â†³ need your help");
                } else
                if (val === "connect root m4sk") {
                    $out.append("gavin@localhost:~$ connect root m4sk<br>");
                        $out.append("Connecting");
                    setTimeout(function() {
                        $out.append(".");
                    }, 1000);
                    setTimeout(function() {
                        $out.append(".");
                    }, 2000);
                    setTimeout(function() {
                        $out.append(".");
                    }, 3000);
                    setTimeout(function() {
                        $out.append(".");
                    }, 4000);
                    setTimeout(function() {
                        $out.append(".<br>");
                    }, 5000);
                    var m4skRandom = m4skChance[Math.floor(Math.random()*m4skChance.length)];
                    setTimeout(function() { window.location.href = m4skRandom }, 5100);
                    } else if(val !== "connect root m4sk" && !cmds.includes(val)) {
                        $out.append(`gavin@localhost:~$ ${val}<br>`);
                        $out.append("Login attempt failed. Incorrect username or password.<br>");   
                    } else
                if (val === "breach") {
                    $out.append("gavin@localhost:~$ breach<br>");
                    $out.append("Breaching");
                    setTimeout(function() {
                        $out.append(".");
                    }, 1000);
                    setTimeout(function() {
                        $out.append(".");
                    }, 2000);
                    setTimeout(function() {
                        $out.append(".");
                    }, 3000);
                    setTimeout(function() {
                        $out.append(".");
                    }, 4000);
                    setTimeout(function() {
                        $out.append(".<br>");
                    }, 5000);
                    setTimeout(function() {
                        $out.append("Successfully breached the firewall.<br>");
                    }, 6250);
                } else {
                    $out.append(`gavin@localhost:~$ ${val}<br>`);
                    $out.append("Command not recognized.<br>");
                }
                $this.val('');
            }
        });
    </script>

</body>

</html>
