<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Terminal Mystery - M.A.S.K.</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta name="author" content="Gavin Wainwright">
    <meta name="description" content="description here">
    <meta name="keywords" content="keywords,here">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>

<body>

    <div id="screen">Successfully established a connection to root@m4sk
        <br>Type 'help' for a list of commands.
        <div id="output"></div>
        <br>root@m4sk:~$
        <input></input>
    </div>
    
    <script>
  var cmds = [
     "",
     "help",
     "clear",
     "inbox",
     "show",
     "show it's time",
     "exit",
 ];
        
    var cmdsUsed = [];

 var $out = $("#output");
 $("#screen input").focus();
 $("#screen input").on("keydown", function(event) {
             if (event.which === 13) { // Enter key pressed
                var $this = $(this),
                     valArgs = $this.val();
                 $this.focus().val("");
                 var val = valArgs.toLowerCase();
                 
                 function cmdUsed() {
                  $out.append(`root@m4sk:~$ ${valArgs}<br>`);
                 }
                 
                 if (val === "") {
                     $out.append("root@m4sk:~$<br>");
                 } else
                 if (val === "help") {
                     cmdUsed();
                     $out.append("Here's a list of commands:<br>help - Sends a list of commands<br>inbox - Shows your inbox<br>show [file|message] - Shows the contents of a file or message<br>exit - Exits and connects you back to gavin@localhost.<br>clear - Clears the terminal<br>");
                 } else
                 if (val === "inbox") {
                     cmdUsed();
                     $out.append("Your Inbox:<br>â†³ it's time<br>");
                 } else
                 if (val === "clear") {
                     $out.empty();
                 } else
                 if (val.startsWith("show")) {
                     if (!cmds.includes(val)) {
                         cmdUsed();
                         $out.append(`Could not find a file / message with the name of ${val.substring(5)}.<br>`);
                     }
                     if (val === "show it's time") {
                         cmdsUsed.push("show it's time");
                         cmdUsed();
                         $out.append("Viewing the content of it's time:<br>To all M.A.S.K. members,<br>    In exactly 24 hours of this message being sent out, it will be time<br>to take action against the Peruvian Government as planned.<br>This mission has to be our best, as we all know the poor results of what happened last time.<br> - Shadow<br>");
                     } else if (val === "show") {
                         cmdUsed();
                         $out.append("Specify a file / message to show.<br>");
                     }
                 } else
                       if(val === "exit") {
                         if(!cmdsUsed.includes("show it's time")) {
                             cmdUsed();
                             $out.append("Try looking around on this computer some more before exiting.<br>"); 
                         } else {
                         cmdUsed();
                         $out.append("Successfully exited.<br>");
                         $out.append("Connecting");
                         setTimeout(function() { $out.append("."); }, 1000);
                         setTimeout(function() { $out.append("."); }, 2000);
                         setTimeout(function() { $out.append("."); }, 3000);
                         setTimeout(function() { $out.append("."); }, 4000);
                         setTimeout(function() { $out.append("."); }, 5000);
                         setTimeout(function() { window.location.href = "https://gavwin.github.io/Terminal%20Mystery/1"; }, 5100);
                     }
                       } else {
                       cmdUsed();
                       $out.append("Command not recognized.<br>");
                     }
                     $this.val("");
                 }
             });
    </script>

</body>

</html>
